name: npm install
description: npm install
inputs:
  ls_opts:
    description: ls options
    required: false
    # in windows, la does NOT work
    default: "-la"

  run_npm_audit:
    description: npm audit
    required: false
    default: "false"

runs:
  using: composite
  steps:
    - name: npm run setup
      shell: bash
      run: npm run setup --if-present

    - name: npm install
      shell: bash
      run: npm ci

    - name: ls
      shell: bash
      run: ls ${{ inputs.ls_opts }} ./node_modules

    - name: npm audit
      if: ${{ inputs.run_npm_audit == 'true' }}
      shell: bash
      run: npm audit
      continue-on-error: true
